#!/bin/bash
# .bash_aliases

alias ping='/usr/local/bin/grc -c conf.ping /usr/bin/script -q /dev/null /sbin/ping'
alias traceroute='/usr/local/bin/grc /usr/sbin/traceroute'
alias diff='/usr/local/bin/grc /usr/bin/diff'
alias flushdns='sudo dscacheutil -flushcache && sudo killall -HUP mDNSResponder'
alias sublime='/Applications/Sublime\ Text.app/Contents/SharedSupport/bin/subl'

alias jq-es-empty-indexes="/usr/local/bin/jq '[.indices|path(.[]|select(.primaries.docs.count == 0))|.[0]]'"

function jql { /usr/local/bin/jq -C '.' "$1" | less -R; }
export -f jql

function jq_es_indexes_where {
	/usr/local/bin/jq '[.indices|path(.[]|select($1))|.[0]]'
}
export jq_es_indexes_where

export LSCOLORS=ExFxBxDxCxegedabagacad
alias ls='ls -G'

alias docker-images-pull="docker images | awk '(NR>1) && ($2!~/none/) {print $1\":\"$2}' | xargs -L1 docker pull"
alias docker-volume-dangling="docker volume ls -f dangling=true"
alias docker-volume-cleanup="docker volume rm `docker volume ls -f dangling=true -q`"
alias docker-remove-stopped-containers="docker ps -a -q | xargs docker rm"
alias docker-remove-untagged-images="docker images | grep '^<none>' | awk '{print $3}' | xargs docker rmi"

alias socat-up="socat TCP-LISTEN:6000,reuseaddr,fork UNIX-CLIENT:\"$DISPLAY\" > /tmp/socat.log 2> /tmp/socat.err & echo $! >> /tmp/socat.pid"
alias socat-check="if pgrep socat > /dev/null; then echo 'Running'; else echo 'Stopped'; fi"
alias socat-down="kill -9 `pgrep socat`; rm /tmp/socat.pid"

alias redis-cli="docker run -it --rm redis redis-cli $@"
